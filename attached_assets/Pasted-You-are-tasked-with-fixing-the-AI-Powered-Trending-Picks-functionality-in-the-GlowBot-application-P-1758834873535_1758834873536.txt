You are tasked with fixing the AI-Powered Trending Picks functionality in the GlowBot application. Please complete these specific tasks:
TASK 1: Remove Amazon Options from Trending Picks UI
- In the TrendingAIPicks.tsx page, remove any Amazon-related source options or filters
- Remove Amazon source toggle/selection from the source filter dropdown
- Update the source filter to only show 'all' and 'perplexity' options
- Remove any Amazon-specific UI elements or mentions from the trending picks interface
- Ensure the page works properly with only Perplexity as the data source
TASK 2: Debug and Fix Perplexity Product Fetcher
Based on the console logs showing "ðŸ“Š Total organized products: 0", the Perplexity fetcher is not returning actual products. Please:
- Debug why the Perplexity API calls are not returning valid products
- Check the perplexityTrends.ts service for API response handling issues
- Verify the product validation logic isn't being too restrictive
- Fix any JSON parsing errors or response format mismatches
- Ensure the niche-specific Perplexity fetchers are working correctly
- Test the /api/pull-perplexity-trends endpoint to confirm it adds products to the database
TASK 3: Test and Verify the Fix
- Ensure the "Run Perplexity Fetch" button actually populates trending products
- Verify products are being stored in the database correctly
- Test that the trending picks UI displays the fetched products properly
- Make sure all niches (beauty, tech, fashion, fitness, food, travel, pets) return products
DEBUGGING REQUIREMENTS:
- Add proper error handling and logging to identify where the Perplexity fetch is failing
- Check if the PERPLEXITY_API_KEY is properly configured and working
- Verify the API request format matches Perplexity's current API specification
- Ensure the product validation filters aren't rejecting all valid products
- Test the database insertion process to confirm products are being saved
TECHNICAL CONSTRAINTS:
- Do NOT delete any Amazon-related code files - only disable/hide the UI options
- Preserve all existing functionality except Amazon options in trending picks
- Ensure the app continues to work normally after changes
- Maintain all existing error handling and fallback mechanisms
- Keep the existing database schema and API structure intact
Expected outcome: The Trending Picks page should show only Perplexity as a source option, and clicking "Run Perplexity Fetch" should successfully populate the page with real trending products from all supported niches.