Comprehensive Pricing Structure Update Prompt for Replit Agent
Hey Replit Agent! I need you to update the entire pricing system from the current 2-tier structure (Free + Pro) to a new 4-tier structure (Starter, Creator, Pro, Agency). This is a comprehensive refactor that touches quota limits, feature gates, UI visibility, and billing logic throughout the application.

New Tier Structure Overview
Tier 1: Starter - $7/mo ($5/mo annual)
GPT-4: 15/month
Claude: 10/month
Trend Fetcher: 10/month
Viral Score: Basic (GPT-4 only, number preview without breakdown)
Features: 3 templates per category, 3 niches (beauty/tech/fashion), last 10 history items
Blocked: Bulk generation, content export, trend forecasting, custom prompts, API access
Tier 2: Creator - $15/mo ($10/mo annual)
GPT-4: 50/month
Claude: 30/month
Trend Fetcher: 25/month
Viral Score: Full scoring + basic AI suggestions
Features: All templates, all 7 niches, last 50 history items, CSV export, basic trend forecasting (hot/rising only)
Blocked: Bulk generation, custom prompts, API access, affiliate studio
Tier 3: Pro - $35/mo ($25/mo annual)
GPT-4: 300/month
Claude: 150/month
Trend Fetcher: 100/month
Viral Score: Advanced (dual AI - Claude + GPT)
Features: Both studios (Viral + Affiliate), bulk generation (10 items), full trend forecasting, custom prompts, unlimited history, priority support, Make.com webhooks
Blocked: Team features, API access, brand templates
Tier 4: Agency - $69/mo ($50/mo annual)
GPT-4: 1000/month (shared)
Claude: 500/month (shared)
Trend Fetcher: Unlimited
Viral Score: Enterprise (with competitive analysis)
Features: Everything in Pro + 5 team seats, brand templates, API access, bulk scheduling (50+ items), analytics dashboard, dedicated account manager, white-label reports
Required Changes Checklist
1. Update Quota Service (server/services/quotaService.ts)
 Update getGptLimit() to handle all 4 tiers (starter: 15, creator: 50, pro: 300, agency: 1000)
 Update getClaudeLimit() to handle all 4 tiers (starter: 10, creator: 30, pro: 150, agency: 500)
 Update getTrendAnalysisLimit() to handle all 4 tiers (starter: 10, creator: 25, pro: 100, agency: Infinity)
 Add new method getViralScoreType(tier: string) returning 'basic' | 'full' | 'advanced' | 'enterprise'
 Update canBulkGenerate(tier: string) to allow 'pro' and 'agency' tiers
 Add method getBulkGenerationLimit(tier: string) returning max items (pro: 10, agency: 50)
 Add method getUnlockedNiches(tier: string) returning array of niche names (starter: 3, others: all 7)
 Add method getTemplateAccess(tier: string) returning template visibility rules
 Add method getHistoryLimit(tier: string) returning max history items (starter: 10, creator: 50, pro/agency: Infinity)
 Add method canExportContent(tier: string) returning boolean
 Add method canAccessAffiliate(tier: string) returning boolean (pro/agency only)
 Add method canUseTrendForecasting(tier: string) returning 'none' | 'basic' | 'full'
2. Update Schema (shared/schema.ts)
 Update subscriptionTier enum to include: 'starter', 'creator', 'pro', 'agency'
 Ensure backward compatibility with existing 'free' tier (map to 'starter' or handle separately)
 Add migration script to convert existing 'free' users to 'starter' tier
 Add migration script to ensure existing 'pro' users maintain their tier
3. Update Identity Service (server/services/identityService.ts)
 Update default tier logic for new users (should be 'starter' instead of 'free')
 Update dev mode auto-assignment (keep as 'pro' for development)
4. Update Billing API (server/api/billing.ts)
 Update /api/billing/subscription to handle all 4 tiers
 Update /api/billing/create-checkout to support multiple tier upgrades (not just 'pro')
 Add price configuration for each tier (monthly + annual pricing)
 Update /api/billing/usage response to include tier-specific limits and features
 Add tier comparison data endpoint for pricing page
5. Update Quota Middleware (server/middleware/checkQuota.ts)
 Ensure all tier checks use updated quotaService methods
 Update error messages to be tier-specific with appropriate upgrade CTAs
 Add checks for affiliate studio access (block starter/creator)
 Add checks for trend forecasting level (none/basic/full)
 Add checks for bulk generation limits (enforce max items per tier)
6. Update Pricing Page (client/src/pages/PricingPage.tsx)
 Update pricing tiers from 2 to 4
 Add "Starter" tier card with $7/mo ($5/mo annual) pricing
 Update "Creator" tier card with correct limits and features
 Update "Pro" tier card with correct limits and features
 Add "Agency" tier card with $69/mo ($50/mo annual) pricing
 Update feature comparison table to show all 4 tiers
 Update upgrade triggers section to show all transition points
 Update CTAs to route to correct tier upgrades
 Ensure annual savings badges show correct percentages
7. Update Landing Page (client/src/pages/LandingPage.tsx)
 Update pricing section to show all 4 tiers
 Update feature highlights to reflect new tier boundaries
 Update CTAs to encourage "Starter" tier signups
8. Update Account/Dashboard Pages
 Update Account.tsx to display current tier (starter/creator/pro/agency)
 Update usage statistics to show tier-specific limits
 Add upgrade/downgrade options for all tier transitions
 Update tier badge UI to differentiate all 4 tiers visually
9. Update Content Generation Page (client/src/pages/GenerateContent.tsx)
 Update tier badge to show all 4 tier types
 Update quota counters to show tier-specific limits (GPT/Claude/Trends)
 Add UI blocking for bulk generation on starter/creator tiers
 Add UI messaging for affiliate studio access (blocked on starter/creator)
 Update viral score display based on tier (basic/full/advanced/enterprise)
10. Update Template Selector (client/src/components/TemplateSelector.tsx)
 Add niche filtering based on tier (starter: 3 niches, others: all 7)
 Add template category filtering (starter: 3 categories, others: all)
 Show lock icons on unavailable templates with upgrade CTA
11. Update Content History (client/src/pages/EnhancedContentHistory.tsx)
 Limit visible history items by tier (starter: 10, creator: 50, pro/agency: unlimited)
 Block CSV export for starter tier (show upgrade CTA)
 Add pagination/filtering limits based on tier
12. Update Trend Pages
 Block trend forecasting UI for starter tier
 Show basic forecasting only (hot/rising) for creator tier
 Show full forecasting (hot/rising/upcoming/declining) for pro/agency
 Update TrendForecaster.tsx to respect tier limits
 Update TrendHistory.tsx to respect tier limits
13. Update Viral Score Components
 Update ViralScoreDisplay.tsx to show different detail levels by tier
 Starter: Show number only, no breakdown
 Creator: Show full score + basic suggestions
 Pro: Show advanced dual-AI analysis
 Agency: Show enterprise analysis with competitive intel
14. Add Feature Gates Throughout App
 Create utility function canAccessFeature(tier: string, feature: string): boolean
 Gate affiliate studio navigation/access (pro/agency only)
 Gate bulk generation UI (pro/agency only)
 Gate custom prompts feature (pro/agency only)
 Gate API access documentation (agency only)
 Gate team management UI (agency only)
15. Update Environment & Configuration
 Add tier-specific environment variables if needed
 Update README with new tier structure documentation
 Update any hardcoded tier references throughout codebase
16. Testing & Validation
 Test quota enforcement for all 4 tiers
 Test feature visibility for all 4 tiers
 Test upgrade flows between all tier combinations
 Test billing checkout for each tier
 Test usage statistics display for each tier
 Test error messages show correct tier-specific CTAs
 Verify backward compatibility with existing users
Critical Requirements
No breaking changes: Existing 'free' and 'pro' users must continue working
Graceful degradation: Features should be hidden/disabled, not crash when unavailable
Clear upgrade CTAs: Every blocked feature should show which tier unlocks it
Consistent naming: Use exact tier names: 'starter', 'creator', 'pro', 'agency'
Type safety: Update all TypeScript types to include new tiers
Migration safety: Provide scripts to migrate existing users if needed
Post-Implementation Checklist
After completing all changes, please:

 Triple-check all quota limits match the spec exactly
 Verify all feature gates are correctly blocking/allowing based on tier
 Test that 'free' tier users are handled (migrated to 'starter' or maintained separately)
 Confirm pricing page displays all 4 tiers with correct pricing
 Validate upgrade flows work for all tier transitions
 Review error messages reference correct tiers and limits
 Check UI shows appropriate tier badges throughout app
 Test viral score analysis respects tier-based detail levels
 Verify trend forecasting access matches tier permissions
 Confirm bulk generation limits are enforced correctly
Please implement this systematically, update all files that reference tiers/quotas, and provide a final summary of all changes made. Make sure to maintain backward compatibility and test thoroughly before marking complete.